-- Índices para a busca por texto
CREATE INDEX IDX_TGFPRO_DESCRPROD_FUNC ON TGFPRO (TRANSLATE(UPPER(DESCRPROD), 'ÁÀÂÃÄÉÈÊËÍÌÎÏÓÒÔÕÖÚÙÛÜÇ', 'AAAAAEEEEIIIIOOOOOUUUUC'));
CREATE INDEX IDX_TGFPRO_MARCA_FUNC ON TGFPRO (TRANSLATE(UPPER(MARCA), 'ÁÀÂÃÄÉÈÊËÍÌÎÏÓÒÔÕÖÚÙÛÜÇ', 'AAAAAEEEEIIIIOOOOOUUUUC'));

-- Índices para a busca por número
CREATE INDEX IDX_ADCADEND_ARM_SEQ ON AD_CADEND (CODARM, SEQEND);
CREATE INDEX IDX_ADCADEND_ARM_PROD ON AD_CADEND (CODARM, CODPROD);

-- Índice para acelerar o cálculo da Derivação
CREATE INDEX IDX_TGFVOA_PROD_VOL_DESC ON TGFVOA (CODPROD, CODVOL, DESCRDANFE);

-- Índices para consultas de permissão e armazém
CREATE INDEX IDX_ADPERMEND_NUMREG ON AD_PERMEND(NUMREG);
CREATE INDEX IDX_ADCADARM_CODARM ON AD_CADARM(CODARM);
CREATE INDEX IDX_ADAPPPERM_CODUSU ON AD_APPPERM(CODUSU);

-- Índice principal para joins com a tabela de produtos
CREATE INDEX IDX_TGFPRO_CODPROD ON TGFPRO(CODPROD);

-- Índice otimizado para busca de locais de picking
-- Se criar este, pode remover o IDX_ADCADEND_ARM_PROD existente
CREATE INDEX IDX_ADCADEND_PICKING ON AD_CADEND(CODARM, CODPROD, ENDPIC, SEQEND);

-- Índice para join na view V_WMS_ITEM_DETALHES
CREATE INDEX IDX_ADCADEND_PROD_VOL ON AD_CADEND(CODPROD, CODVOL);

-- Índices para consulta de histórico (usando TRUNC)
CREATE INDEX IDX_ADBXAEND_USU_DTFUNC ON AD_BXAEND(USUGER, TRUNC(DATGER));
CREATE INDEX IDX_ADHISTENDAPP_USU_DTFUNC ON AD_HISTENDAPP(CODUSU, TRUNC(DTHOPER));
-- OU, se puder evitar TRUNC e usar range de data:
-- CREATE INDEX IDX_ADBXAEND_USU_DT ON AD_BXAEND(USUGER, DATGER);
-- CREATE INDEX IDX_ADHISTENDAPP_USU_DT ON AD_HISTENDAPP(CODUSU, DTHOPER);

-- Índice para join e polling na tabela de itens de baixa/transferência
CREATE INDEX IDX_ADIBXEND_SEQBAI ON AD_IBXEND(SEQBAI);
CREATE INDEX IDX_ADIBXEND_SEQBAI_PROD ON AD_IBXEND(SEQBAI, CODPROD);